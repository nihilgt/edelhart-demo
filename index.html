<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EDELHART</title>
  <meta name="description" content="Jewelry reflecting the world — both its brilliance and its shadows. Bespoke pieces in silver, 10K/14K/18K gold, diamonds, and precious stones." />
  <meta name="color-scheme" content="dark light">
  <meta name="supported-color-schemes" content="dark">
  <link rel="icon" type="image/png" href="./img/favicon.png"/>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Playfair+Display:wght@600&family=Signatura+Monoline+Script&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./css/styles.css">
  <!-- FIX: Define base URL for app.js so it knows we are at root -->
  <script>
    window.__BASE_URL_OVERRIDE = new URL('./', location.href).href;
  </script>
</head>
<body>
<header id="site-header">
  <div class="wrap nav">
    <a href="#home" class="brand" aria-label="EDELHART Home">
      <img src="./img/logo.png" alt="EDELHART Logo" class="navbar-logo">
      <span class="brand-word">EDELHART</span>
    </a>
    <nav class="menu" aria-label="Main">
      <button class="menu-btn" aria-label="Open menu" aria-expanded="false">
        <span class="menu-icon" aria-hidden="true"></span>
      </button>
      <div class="links">
        <div class="dropdown">
          <button class="drop-btn" data-spy="#collections" aria-haspopup="true" aria-expanded="false">
            Collections
            <svg class="caret" viewBox="0 0 24 24" width="14" height="14" aria-hidden="true">
              <path fill="currentColor" d="M7 10l5 5 5-5z"/>
            </svg>
          </button>
          <div class="drop-menu" role="menu">
            <a href="./collections/sss.html" role="menuitem">SSS</a>
            <a href="./collections/whispering-a.html" role="menuitem">Whispering A</a>
            <a href="./collections/ECHO.html" role="menuitem">ECHO</a>
          </div>
        </div>
        <span class="sep">·</span>
        <a href="#products" data-spy="#products">All Products</a>
        <span class="sep">·</span>
        <a href="#contact" data-spy="#contact">Contact</a>
        <span class="sep">·</span>
        <a href="#about" data-spy="#about">About</a>
      </div>

      <div class="nav-utilities" aria-label="Cart and currency">
        <button class="cart-toggle" type="button" aria-label="Open cart">
          Cart <span class="cart-count" aria-hidden="true">0</span>
        </button>
        <select class="currency-select" data-role="currency-select" aria-label="Select currency">
          <option value="VND">VND</option>
          <option value="USD">USD</option>
          <option value="EUR">EUR</option>
        </select>
      </div>
    </nav>
  </div>
</header>

<main>
  <section class="hero full-hero fit-width" id="home" aria-label="Edelhart hero">
    <div class="hero-bg" aria-hidden="true">
      <picture>
        <source media="(max-width: 480px)" srcset="./img/1.jpeg" />
        <img src="./img/1.jpeg" alt="Edelhart Hero" loading="eager" sizes="100vw" />
      </picture>
    </div>
    <div class="overlay" aria-hidden="true"></div>
    <div class="hero-content">
      <h1 class="script">Jewelry reflecting the world — both its brilliance and its shadows.</h1>
      <a class="scroll-indicator" href="#collections" role="button" aria-label="Scroll to collections" title="Scroll to collections">⌄</a>
    </div>
  </section>

  <section id="collections" aria-label="Collections">
    <div class="wrap">
      <div class="section-head">
        <h2>Collections</h2>
      </div>

      <div class="collection-strip" aria-label="Collections slider" data-slider="collection">
        <button class="col-btn col-prev" type="button" aria-label="Previous collection">‹</button>
        <button class="col-btn col-next" type="button" aria-label="Next collection">›</button>
        <div class="collection-track">
          <!-- populated by app.js from products-data.js -->
        </div>
        <div class="swipe-indicator" aria-hidden="true"><div class="thumb"></div></div>
      </div>
    </div>
  </section>

  <section id="products" aria-label="All Products">
    <div class="wrap">
      <div class="section-head">
        <h2>All Products</h2>
        <p>Discover the full catalog. Bespoke variations available upon request.</p>
      </div>

      <div class="filters-wrap">
        <button class="filter-toggle" type="button" aria-expanded="false" aria-controls="sort-panel">
          <svg viewBox="0 0 24 24" width="16" height="16" aria-hidden="true">
            <path fill="currentColor" d="M3 5h18v2H3V5zm4 6h10v2H7v-2zm3 6h4v2h-4v-2z"/>
          </svg>
          Filters
          <svg class="caret" viewBox="0 0 24 24" width="12" height="12" aria-hidden="true">
            <path fill="currentColor" d="M7 10l5 5 5-5z"/>
          </svg>
        </button>
        <div class="sort-panel" id="sort-panel" hidden>
          <div class="sort">
            <label for="all-sort">Sort by price</label>
            <select id="all-sort" aria-label="Sort products by price">
              <option value="asc">Low to high</option>
              <option value="desc">High to low</option>
            </select>
          </div>
        </div>
      </div>

      <div class="catalog" id="all-catalog">
        <!-- populated by app.js from products-data.js -->
      </div>

      <div class="section-head" id="recommended" style="margin-top: 48px;">
        <h2>Recommended for you</h2>
        <p>Curated picks based on our best-sellers and new releases.</p>
      </div>
      <div class="slider-strip" aria-label="Recommended products (horizontal)" data-slider="recommended">
        <button class="slider-arrow slider-arrow-prev" type="button" aria-label="Previous recommended item">‹</button>
        <div class="slider-track">
          <!-- populated by app.js -->
        </div>
        <button class="slider-arrow slider-arrow-next" type="button" aria-label="Next recommended item">›</button>
        <div class="swipe-indicator" aria-hidden="true"><div class="thumb"></div></div>
      </div>
    </div>
  </section>

  <!-- Place this section before the About or Contact section -->
  <section id="lookbook" aria-label="Lookbook Flipbook">
    <div class="wrap">
      <div class="section-head">
        <h2>Lookbook Flipbook</h2>
        <p>Swipe or use arrows to flip through hero shots from our catalog.</p>
      </div>

      <div class="flipbook-scene">
        <div class="flipbook-book" id="flipbook">
          <div class="flipbook-cover"></div>
          <div class="flipbook-spine"></div>

          <div class="flipbook-base-spread">
            <div class="flipbook-page"><div class="flipbook-img" id="flipLeft"></div></div>
            <div class="flipbook-page"><div class="flipbook-img" id="flipRight"></div></div>
          </div>

          <div class="flipbook-turner" id="flipTurner">
            <div class="flipbook-face flipbook-front">
              <div class="flipbook-img" id="flipFront"></div><div class="flipbook-peek"></div>
            </div>
            <div class="flipbook-face flipbook-back">
              <div class="flipbook-img" id="flipBack"></div><div class="flipbook-peek"></div>
            </div>
          </div>
        </div>

        <div class="flipbook-controls">
          <button class="flipbook-btn" id="flipPrev">Prev</button>
          <div class="flipbook-indicator">
            <div class="flipbook-dots" id="flipDots"></div>
            <span id="flipLabel">Spread 1 of 1</span>
          </div>
          <button class="flipbook-btn" id="flipNext">Next</button>
        </div>
      </div>
    </div>
  </section>

  <script>
    /* Logic for flipbook */
    (() => {
      const images = [
        "img/flipbook/EDELHART Crafted Beginnings 1st_page-0001.jpg",
        "img/flipbook/EDELHART Crafted Beginnings 1st_page-0002.jpg",
        "img/flipbook/EDELHART Crafted Beginnings 1st_page-0003.jpg",
        "img/flipbook/EDELHART Crafted Beginnings 1st_page-0004.jpg",
        "img/flipbook/EDELHART Crafted Beginnings 1st_page-0005.jpg",
        "img/flipbook/EDELHART Crafted Beginnings 1st_page-0006.jpg",
        "img/flipbook/EDELHART Crafted Beginnings 1st_page-0007.jpg",
        "img/flipbook/EDELHART Crafted Beginnings 1st_page-0008.jpg",
        "img/flipbook/EDELHART Crafted Beginnings 1st_page-0009.jpg",
        "img/flipbook/EDELHART Crafted Beginnings 1st_page-0010.jpg",
        "img/flipbook/EDELHART Crafted Beginnings 1st_page-0011.jpg",
        "img/flipbook/EDELHART Crafted Beginnings 1st_page-0012.jpg",
        "img/flipbook/EDELHART Crafted Beginnings 1st_page-0013.jpg",
        "img/flipbook/EDELHART Crafted Beginnings 1st_page-0014.jpg",
        "img/flipbook/EDELHART Crafted Beginnings 1st_page-0015.jpg",
        "img/flipbook/EDELHART Crafted Beginnings 1st_page-0016.jpg",
        "img/flipbook/EDELHART Crafted Beginnings 1st_page-0017.jpg",
        "img/flipbook/EDELHART Crafted Beginnings 1st_page-0018.jpg",
        "img/flipbook/EDELHART Crafted Beginnings 1st_page-0019.jpg",
        "img/flipbook/EDELHART Crafted Beginnings 1st_page-0020.jpg"

      ];
      if (images.length % 2 === 1) images.push(images[images.length - 1]);

      const ANIM_MS = 700, DRAG_THRESHOLD = 70;
      const spreadCount = images.length / 2;
      let currentSpread = 0, isDragging = false, dragStartX = 0, dragDir = null;

      const leftPage  = document.getElementById('flipLeft');
      const rightPage = document.getElementById('flipRight');
      const turner    = document.getElementById('flipTurner');
      const frontImg  = document.getElementById('flipFront');
      const backImg   = document.getElementById('flipBack');
      const dotsEl    = document.getElementById('flipDots');
      const labelEl   = document.getElementById('flipLabel');
      const prevBtn   = document.getElementById('flipPrev');
      const nextBtn   = document.getElementById('flipNext');

      function setSpread(idx) {
        const li = idx * 2;
        leftPage.style.backgroundImage  = `url("${images[li]}")`;
        rightPage.style.backgroundImage = `url("${images[li + 1]}")`;
      }
      function renderDots() {
        dotsEl.innerHTML = '';
        for (let i = 0; i < spreadCount; i++) {
          const d = document.createElement('div');
          d.className = 'flipbook-dot' + (i === currentSpread ? ' active' : '');
          dotsEl.appendChild(d);
        }
      }
      function updateUI() {
        renderDots();
        labelEl.textContent = `Spread ${currentSpread + 1} of ${spreadCount}`;
        prevBtn.disabled = currentSpread === 0;
        nextBtn.disabled = currentSpread === spreadCount - 1;
      }

      function setAngle(deg) {
        turner.style.transform = `rotateY(${deg}deg) translateZ(0)`;
        const frontPeek = turner.querySelector('.flipbook-front .flipbook-peek');
        const backPeek  = turner.querySelector('.flipbook-back .flipbook-peek');
        const p = Math.min(1, Math.abs(deg) / 160);
        const op = Math.min(0.7, p * 0.8);
        if (deg < 0 && deg > -180) { frontPeek.style.opacity = op; backPeek.style.opacity = 0; }
        else { frontPeek.style.opacity = 0; backPeek.style.opacity = op; }
      }
      function tween({from, to, dur, ease, onUpdate, onDone}) {
        const start = performance.now();
        const step = now => {
          const t = Math.min(1, (now - start) / dur);
          const v = ease(t);
          onUpdate(from + (to - from) * v);
          if (t < 1) requestAnimationFrame(step); else onDone && onDone();
        };
        requestAnimationFrame(step);
      }
      const easeOut = t => 1 - Math.pow(1 - t, 2.1);
      function glide(toDeg, onDone) {
        const m = turner.style.transform.match(/rotateY\((-?\d+\.?\d*)deg\)/);
        const from = m ? parseFloat(m[1]) : 0;
        tween({ from, to: toDeg, dur: ANIM_MS, ease: easeOut, onUpdate: setAngle, onDone });
      }

      function prepare(direction) {
        const target = direction === 'forward' ? currentSpread + 1 : currentSpread - 1;
        if (target < 0 || target >= spreadCount) return false;
        if (direction === 'forward') {
          frontImg.style.backgroundImage = `url("${images[currentSpread * 2 + 1]}")`;
          backImg.style.backgroundImage  = `url("${images[target * 2]}")`;
          setAngle(0);
        } else {
          frontImg.style.backgroundImage = `url("${images[target * 2 + 1]}")`;
          backImg.style.backgroundImage  = `url("${images[currentSpread * 2]}")`;
          setAngle(-180);
        }
        turner.classList.add('active');
        return true;
      }
      function finishFlip(direction) {
        currentSpread += direction === 'forward' ? 1 : -1;
        setSpread(currentSpread);
        turner.classList.remove('active');
        updateUI();
      }
      function flip(direction) {
        if (!prepare(direction)) return;
        if (direction === 'forward') glide(-180, () => finishFlip('forward'));
        else glide(0, () => finishFlip('backward'));
      }

      function onDragStart(e) {
        if (turner.classList.contains('active')) return;
        dragStartX = (e.touches ? e.touches[0].clientX : e.clientX);
        isDragging = true; dragDir = null;
      }
      function onDragMove(e) {
        if (!isDragging || turner.classList.contains('active')) return;
        const x = (e.touches ? e.touches[0].clientX : e.clientX);
        const delta = x - dragStartX;
        if (!dragDir) {
          if (delta < -20 && currentSpread < spreadCount - 1) { dragDir = 'forward'; if (!prepare('forward')) return; turner.style.transition = 'none'; }
          else if (delta > 20 && currentSpread > 0) { dragDir = 'backward'; if (!prepare('backward')) return; turner.style.transition = 'none'; }
          else return;
        }
        if (dragDir === 'forward') setAngle(Math.max(-180, Math.min(0, -delta)));
        else setAngle(Math.max(-180, Math.min(0, -180 - delta)));
      }
      function onDragEnd(e) {
        if (!isDragging || !dragDir) { isDragging = false; dragDir = null; return; }
        const x = (e.changedTouches ? e.changedTouches[0].clientX : e.clientX);
        const delta = x - dragStartX;
        if (dragDir === 'forward') {
          if (delta < -DRAG_THRESHOLD) glide(-180, () => finishFlip('forward'));
          else glide(0, () => { turner.classList.remove('active'); updateUI(); });
        } else {
          if (delta > DRAG_THRESHOLD) glide(0, () => finishFlip('backward'));
          else glide(-180, () => { turner.classList.remove('active'); updateUI(); });
        }
        isDragging = false; dragDir = null;
      }

      nextBtn.addEventListener('click', () => flip('forward'));
      prevBtn.addEventListener('click', () => flip('backward'));
      window.addEventListener('mousedown', onDragStart);
      window.addEventListener('mousemove', onDragMove, { passive: false });
      window.addEventListener('mouseup', onDragEnd);
      window.addEventListener('touchstart', onDragStart, { passive: true });
      window.addEventListener('touchmove', onDragMove, { passive: false });
      window.addEventListener('touchend', onDragEnd);

      setSpread(currentSpread);
      updateUI();
    })();
  </script>

  <section id="contact" aria-labelledby="contact-title">
    <div class="wrap">
      <div class="section-head">
        <h2 id="contact-title">Contact & Social</h2>
      </div>
      <div class="grid-lite">
        <div class="card contact-card">
          <div class="content"></div>
          <div class="actions">
            <a class="btn primary" href="https://wa.me/84944445084" target="_blank" rel="noopener" aria-label="WhatsApp">
              <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16" aria-hidden="true">
                <path fill="currentColor" d="M12 2a10 10 0 00-8 16.1L3 22l3.9-1A10 10 0 1012 2zm5.2 14.2c-.2.6-1.2 1.1-1.7 1.1-.5 0-1 .2-3.3-1.1-2.8-1.6-4.5-4.6-4.6-4.8-.2-.3-1.1-1.5-1.1-2.8 0-1.2.6-1.8.9-2 .3-.2.8-.3 1-.3h.7c.2 0 .5 0 .7.6.3.7 1 2.4 1 2.5s.1.4 0 .6c-.1.2-.2.3-.4.5-.2.2-.4.5-.6.6-.2.2-.4.4-.2.7.2.3.9 1.5 2.1 2.4 1.5 1.1 2.7 1.5 3.1 1.7.3.1.6.1.8 0 .2-.1 1.3-.6 1.5-.8.2-.1.4-.2.7-.1.2.1 1.1.5 1.3.6.2.1.3.1.4.2.1 0 .1.6-.1 1.1z"/>
              </svg>
              WhatsApp
            </a>
            <a class="btn btn-outline" href="https://www.instagram.com/edelhartvx/" target="_blank" rel="noopener" aria-label="Instagram">
              <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16" aria-hidden="true">
                <path fill="currentColor" d="M7 2h10a5 5 0 015 5v10a5 5 0 01-5 5H7a5 5 0 01-5-5V7a5 5 0 015-5zm5 5a5 5 0 100 10 5 5 0 000-10zm6-1a1 1 0 100 2 1 1 0 000-2zm-6 3a3 3 0 110 6 3 3 0 010-6z"/>
              </svg>
              Instagram
            </a>
            <a class="btn btn-outline" href="https://www.facebook.com/people/Edelhart/61578850709155/" target="_blank" rel="noopener" aria-label="Facebook">
              <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16" aria-hidden="true">
                <path fill="currentColor" d="M22 12a10 10 0 10-11.6 9.9v-7h-2.3V12h2.3V9.7c0-2.3 1.4-3.6 3.5-3.6 1 0 2 .2 2 .2v2.2H15c-1.1 0-1.5.7-1.5 1.4V12h2.6l-.4 2.9h-2.2v7A10 10 0 0022 12z"/>
              </svg>
              Facebook
            </a>
            <a class="btn btn-outline" href="https://maps.google.com/?q=483/11+Le+Van+Sy+Street,+Ward+Nhieu+Loc,+Ho+Chi+Minh+City,+Vietnam"
               target="_blank" rel="noopener" aria-label="Open in Google Maps">
              <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16" aria-hidden="true">
                <path fill="currentColor" d="M12 2a7 7 0 00-7 7c0 5.2 7 13 7 13s7-7.8 7-13a7 7 0 00-7-7zm0 9.5a2.5 2.5 0 110-5 2.5 2.5 0 010 5z"/>
              </svg>
              Open in Google Maps
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="about" aria-label="About">
    <div class="wrap">
      <div class="section-head">
        <h2>About</h2>
        <p>EDELHART crafts pieces that balance light and shadow, precision and emotion.</p>
        <div style="text-align: left; font-style: italic; ">
          <hr style="border: none; border-top: 1px solid #ccc;">
          <p>At Edelhart, we believe that the essence of true luxury lies not only in the materials, but in the story and message that each piece conveys—meticulously brought to life through complex technical structures and exquisite craftsmanship by the hands of master artisans.</p>
          <hr style="border: none; border-top: 1px solid #ccc; margin: 20px 0;">
          <p>We'd be delighted to hear from you at <a href="mailto:chvchvchv1102@edelhart.co" style="color: var(--accent);">chvchvchv1102@edelhart.co</a></p>
        </div>
      </div>
    </div>
  </section>
</main>

<footer>
  <div class="wrap foot">
    <small>© <span id="year"></span> EDELHART. All rights reserved.</small>
    <small><a href="#home">Back to top ↑</a></small>
  </div>
</footer>

<div class="cart-drawer" aria-hidden="true">
  <div class="cart-overlay"></div>
  <aside class="cart-panel" role="dialog" aria-modal="true" aria-label="Cart">
    <header class="cart-header">
      <h2>Your Cart</h2>
      <button type="button" class="cart-close" aria-label="Close cart">✕</button>
    </header>
    <div class="cart-body">
      <div class="cart-empty">Your cart is empty.</div>
      <ul class="cart-items"></ul>
    </div>
    <footer class="cart-footer">
      <div class="cart-summary">
        <span>Total</span>
        <span class="cart-total" data-price-vnd="0">₫0</span>
      </div>
      <a class="btn primary cart-checkout" href="https://wa.me/84944445084" target="_blank" rel="noopener">
        Send order via WhatsApp
      </a>
      <button class="btn outline cart-copy" data-platform="Instagram" type="button">Copy cart & Inquire on Instagram</button>
      <button class="btn outline cart-copy" data-platform="Facebook" type="button">Copy cart & Inquire on Facebook</button>
    </footer>
  </aside>
</div>

<button id="back-to-top" aria-label="Back to top">↑</button>

<script src="./js/products-data.js" defer></script>
<script src="./js/currency-manager.js" defer></script>
<script src="./js/app.js" defer></script>
</body>
</html>